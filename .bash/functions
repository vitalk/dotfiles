#!/usr/bin/env bash

# create a new directory and enter it
function md() {
    mkdir -p "$1" && cd "$1"
}

# create a data url from image
function dataurl() {
    [ $# -eq 1 ] && echo "data:$type;base64,`openssl base64 -in "$1"`" | tr -d '\n'
}

# generate random string
# $1 - number of chars, default 32
# $2 - include special chars like *&^, etc
function randstr() {
    [ "$2" == 0 ] && alphabet="[:alnum:]" || alphabet="[:graph:]"
    cat /dev/urandom | tr -cd "$alphabet" | head -c ${1:-32}
    echo
}

# simple bash todo implementation
# TODO: todone filter
TODO=~/.todo
function todo() {
    if [ $# == "0" ]; then
        if [ `cat $TODO | wc -l` == "0" ]; then
            echo "There is no todos yet";
        else cat $TODO; fi;
    else n=$(($(tail -1 $TODO | cut -d ' ' -f 1)+1)); echo "$n â‡¾ $@" >> $TODO; fi
}
function todone() { sed -i -e "/^$*/d" $TODO; }

# returns current ip address or ip specified by interface
function ip {
    if [ -z "$1" ]; then
        iface=wlan0;
    else
        iface="$1";
    fi
    /sbin/ifconfig "$iface" | grep inet | awk '{print $2}' | sed 's/addr://' | grep .
}
